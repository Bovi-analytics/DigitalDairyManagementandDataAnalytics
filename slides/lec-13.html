<!DOCTYPE html>
<html lang="en"><head>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-html/tabby.min.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/light-border.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-587c61ba64f3a5504c4d52d930310e48.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.8.26">

  <meta name="dcterms.date" content="2025-04-20">
  <title>Beasts &amp; Bytes – Regular expressions</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="../site_libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="../site_libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    html { -webkit-text-size-adjust: 100%; }
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      { color: #003b4f; background-color: #f1f3f5; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #003b4f; } /* Normal */
    code span.al { color: #ad0000; } /* Alert */
    code span.an { color: #5e5e5e; } /* Annotation */
    code span.at { color: #657422; } /* Attribute */
    code span.bn { color: #ad0000; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #003b4f; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #20794d; } /* Char */
    code span.cn { color: #8f5902; } /* Constant */
    code span.co { color: #5e5e5e; } /* Comment */
    code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
    code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
    code span.dt { color: #ad0000; } /* DataType */
    code span.dv { color: #ad0000; } /* DecVal */
    code span.er { color: #ad0000; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #ad0000; } /* Float */
    code span.fu { color: #4758ab; } /* Function */
    code span.im { color: #00769e; } /* Import */
    code span.in { color: #5e5e5e; } /* Information */
    code span.kw { color: #003b4f; font-weight: bold; } /* Keyword */
    code span.op { color: #5e5e5e; } /* Operator */
    code span.ot { color: #003b4f; } /* Other */
    code span.pp { color: #ad0000; } /* Preprocessor */
    code span.sc { color: #5e5e5e; } /* SpecialChar */
    code span.ss { color: #20794d; } /* SpecialString */
    code span.st { color: #20794d; } /* String */
    code span.va { color: #111111; } /* Variable */
    code span.vs { color: #20794d; } /* VerbatimString */
    code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="../site_libs/revealjs/dist/theme/quarto-534cd8e3a96973385dffff3f4709048d.css">
  <link href="../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
<meta property="og:title" content="Regular expressions – Beasts &amp; Bytes">
<meta property="og:description" content="Lecture 13">
<meta property="og:site_name" content="Beasts &amp; Bytes">
<meta name="twitter:title" content="Regular expressions – Beasts &amp; Bytes">
<meta name="twitter:description" content="Lecture 13">
<meta name="twitter:image" content="https://bovi-analytics.github.io/BeastAndBytes/slides/images/twitter-card.png">
<meta name="twitter:creator" content="@MielHostens">
<meta name="twitter:card" content="summary_large_image">
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block center">
  <h1 class="title">Regular expressions</h1>
  <p class="subtitle">Lecture 13</p>

<div class="quarto-title-authors">
</div>

  <p class="date">2025-04-20</p>
</section>
<section>
<section id="sec-introduction" class="title-slide slide level1 center">
<h1>Introduction to Regular Expressions</h1>

</section>
<section id="sec-prerequisites" class="slide level2">
<h2>Prerequisites</h2>
<ul>
<li>This chapter will focus on functions that use&nbsp;<strong>regular expressions</strong>, a concise and powerful language for describing patterns within strings.</li>
</ul>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a></a><span class="co"># Install necessary packages if not already installed</span></span>
<span id="cb1-2"><a></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) <span class="fu">install.packages</span>(<span class="st">"tidyverse"</span>)</span>
<span id="cb1-3"><a></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(babynames)) <span class="fu">install.packages</span>(<span class="st">"babynames"</span>)</span>
<span id="cb1-4"><a></a></span>
<span id="cb1-5"><a></a><span class="co"># Load the libraries</span></span>
<span id="cb1-6"><a></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-7"><a></a><span class="fu">library</span>(babynames)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section></section>
<section>
<section id="sec-pattern-basics" class="title-slide slide level1 center">
<h1>Pattern basics</h1>

</section>
<section id="sec-pattern-basics-1" class="slide level2">
<h2>Pattern basics</h2>
<p>When this is supplied,&nbsp;<a href="https://stringr.tidyverse.org/reference/str_view.html"><code>str_view()</code></a>&nbsp;will show only the elements of the string vector that match, surrounding each match with&nbsp;<code>&lt;&gt;</code>, and, where possible, highlighting the match in blue.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a></a><span class="fu">str_view</span>(fruit, <span class="st">"berry"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code> [6] │ bil&lt;berry&gt;
 [7] │ black&lt;berry&gt;
[10] │ blue&lt;berry&gt;
[11] │ boysen&lt;berry&gt;
[19] │ cloud&lt;berry&gt;
[21] │ cran&lt;berry&gt;
[29] │ elder&lt;berry&gt;
[32] │ goji &lt;berry&gt;
[33] │ goose&lt;berry&gt;
[38] │ huckle&lt;berry&gt;
[50] │ mul&lt;berry&gt;
[70] │ rasp&lt;berry&gt;
[73] │ salal &lt;berry&gt;
[76] │ straw&lt;berry&gt;</code></pre>
</div>
</div>
</section>
<section id="sec-pattern-basics-2" class="slide level2">
<h2>Pattern basics</h2>
<ul>
<li><p>Letters and numbers match exactly and are called&nbsp;<strong>literal characters</strong>.</p></li>
<li><p>Most punctuation characters, like <code>.</code>, <code>+</code>, <code>*</code>, <code>[</code>,<code>]</code>, and <code>?</code>, have special <a href="#/0">meanings</a> and are called&nbsp;<strong>metacharacters</strong>.</p></li>
</ul>
</section>
<section id="sec-pattern-example-1" class="slide level2">
<h2>Pattern example 1</h2>
<p>For example,&nbsp;<code>.</code>&nbsp;will match any character, so&nbsp;<code>"a."</code>&nbsp;will match any string that contains an “a” followed by another character</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a></a><span class="fu">str_view</span>(<span class="fu">c</span>(<span class="st">"a"</span>, <span class="st">"ab"</span>, <span class="st">"ae"</span>, <span class="st">"bd"</span>, <span class="st">"ea"</span>, <span class="st">"eab"</span>), <span class="st">"a."</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[2] │ &lt;ab&gt;
[3] │ &lt;ae&gt;
[6] │ e&lt;ab&gt;</code></pre>
</div>
</div>
</section>
<section id="sec-pattern-example-2" class="slide level2">
<h2>Pattern example 2</h2>
<p>For example, we could find all the fruits that contain an “a”, followed by three letters, followed by an “e”</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a></a><span class="fu">str_view</span>(fruit, <span class="st">"a...e"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] │ &lt;apple&gt;
 [7] │ bl&lt;ackbe&gt;rry
[48] │ mand&lt;arine&gt;
[51] │ nect&lt;arine&gt;
[62] │ pine&lt;apple&gt;
[64] │ pomegr&lt;anate&gt;
[70] │ r&lt;aspbe&gt;rry
[73] │ sal&lt;al be&gt;rry</code></pre>
</div>
</div>
</section></section>
<section>
<section id="sec-quantifiers" class="title-slide slide level1 center">
<h1>Quantifiers</h1>

</section>
<section id="sec-quantifiers-2" class="slide level2">
<h2>Quantifiers</h2>
<p><strong>Quantifiers</strong> control how many times a pattern can match:</p>
<ul>
<li><p><code>?</code> makes a pattern optional (i.e.&nbsp;it matches 0 or 1 times)</p></li>
<li><p><code>+</code> lets a pattern repeat (i.e.&nbsp;it matches at least once)</p></li>
<li><p><code>*</code> lets a pattern be optional or repeat (i.e.&nbsp;it matches any number of times, including 0).</p></li>
</ul>
</section>
<section id="sec-quantifier-question" class="slide level2">
<h2>Quantifier <code>?</code></h2>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb8"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a></a><span class="co"># ab? matches an "a", optionally followed by a "b".</span></span>
<span id="cb8-2"><a></a><span class="fu">str_view</span>(<span class="fu">c</span>(<span class="st">"a"</span>, <span class="st">"ab"</span>, <span class="st">"abb"</span>), <span class="st">"ab?"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] │ &lt;a&gt;
[2] │ &lt;ab&gt;
[3] │ &lt;ab&gt;b</code></pre>
</div>
</div>
</section>
<section id="sec-quantifier-plus" class="slide level2">
<h2>Quantifier <code>+</code></h2>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb10"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a></a><span class="co"># ab+ matches an "a", followed by at least one "b".</span></span>
<span id="cb10-2"><a></a><span class="fu">str_view</span>(<span class="fu">c</span>(<span class="st">"a"</span>, <span class="st">"ab"</span>, <span class="st">"abb"</span>), <span class="st">"ab+"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[2] │ &lt;ab&gt;
[3] │ &lt;abb&gt;</code></pre>
</div>
</div>
</section>
<section id="sec-quantifier-star" class="slide level2">
<h2>Quantifier <code>*</code></h2>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb12"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a></a><span class="co"># ab* matches an "a", followed by any number of "b"s.</span></span>
<span id="cb12-2"><a></a><span class="fu">str_view</span>(<span class="fu">c</span>(<span class="st">"a"</span>, <span class="st">"ab"</span>, <span class="st">"abb"</span>), <span class="st">"ab*"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] │ &lt;a&gt;
[2] │ &lt;ab&gt;
[3] │ &lt;abb&gt;</code></pre>
</div>
</div>
</section></section>
<section>
<section id="sec-character-classes" class="title-slide slide level1 center">
<h1>Character classes</h1>

</section>
<section id="sec-character-classes-2" class="slide level2">
<h2>Character classes</h2>
<p><strong>Character classes</strong>&nbsp;are defined by <code>[]</code> and let you match a set of characters</p>
<ul>
<li><p><code>[abcd]</code>&nbsp;matches “a”, “b”, “c”, or “d”.</p></li>
<li><p>You can also invert the match by starting with&nbsp;<code>^</code>:&nbsp;<code>[^abcd]</code>&nbsp;matches anything&nbsp;<strong>except</strong>&nbsp;“a”, “b”, “c”, or “d”.</p></li>
</ul>
</section>
<section id="sec-example-1" class="slide level2">
<h2>Example 1</h2>
<p>We can use this idea to find the words containing an “x” surrounded by vowels:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb14"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a></a><span class="fu">str_view</span>(words, <span class="st">"[aeiou]x[aeiou]"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[284] │ &lt;exa&gt;ct
[285] │ &lt;exa&gt;mple
[288] │ &lt;exe&gt;rcise
[289] │ &lt;exi&gt;st</code></pre>
</div>
</div>
</section>
<section id="sec-example-2" class="slide level2">
<h2>Example 2</h2>
<p>We can use this idea to find “y” surrounded by consonants:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb16"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a></a><span class="fu">str_view</span>(words, <span class="st">"[^aeiou]y[^aeiou]"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[836] │ &lt;sys&gt;tem
[901] │ &lt;typ&gt;e</code></pre>
</div>
</div>
</section>
<section id="sec-alternation" class="slide level2">
<h2>Alternation</h2>
<p>You can use&nbsp;<strong>alternation</strong>,&nbsp;<code>|</code>, to pick between one or more alternative patterns. For example, the following patterns look for fruits containing “apple”, “melon”, or “nut”.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb18"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a></a><span class="fu">str_view</span>(fruit, <span class="st">"apple|melon|nut"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] │ &lt;apple&gt;
[13] │ canary &lt;melon&gt;
[20] │ coco&lt;nut&gt;
[52] │ &lt;nut&gt;
[62] │ pine&lt;apple&gt;
[72] │ rock &lt;melon&gt;
[80] │ water&lt;melon&gt;</code></pre>
</div>
</div>
</section></section>
<section>
<section id="sec-thank-you" class="title-slide slide level1 center">
<h1>Key functions</h1>

</section>
<section id="sec-detect-matches" class="slide level2">
<h2>Detect matches</h2>
<p><code>str_detect()</code> returns a logical vector that is <code>TRUE</code> if the pattern matches an element of the character vector and&nbsp;<code>FALSE</code>&nbsp;otherwise</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb20"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a></a><span class="fu">str_detect</span>(<span class="fu">c</span>(<span class="st">"a"</span>, <span class="st">"b"</span>, <span class="st">"c"</span>), <span class="st">"[aeiou]"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  TRUE FALSE FALSE</code></pre>
</div>
</div>
</section>
<section id="sec-count-matches" class="slide level2">
<h2>Count matches</h2>
<p>The next step up in complexity from&nbsp;<a href="https://stringr.tidyverse.org/reference/str_detect.html"><code>str_detect()</code></a>&nbsp;is&nbsp;<a href="https://stringr.tidyverse.org/reference/str_count.html"><code>str_count()</code></a>: rather than a true or false, it tells you how many matches there are in each string.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb22"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"apple"</span>, <span class="st">"banana"</span>, <span class="st">"pear"</span>)</span>
<span id="cb22-2"><a></a><span class="fu">str_count</span>(x, <span class="st">"p"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2 0 1</code></pre>
</div>
</div>
</section>
<section id="sec-replace-values" class="slide level2">
<h2>Replace values</h2>
<p>We can modify values with&nbsp;<a href="https://stringr.tidyverse.org/reference/str_replace.html"><code>str_replace()</code></a>&nbsp;and&nbsp;<a href="https://stringr.tidyverse.org/reference/str_replace.html"><code>str_replace_all()</code></a>.</p>
<ul>
<li><p>&nbsp;<a href="https://stringr.tidyverse.org/reference/str_replace.html"><code>str_replace()</code></a>&nbsp;replaces the first match,</p></li>
<li><p>&nbsp;<a href="https://stringr.tidyverse.org/reference/str_replace.html"><code>str_replace_all()</code></a>&nbsp;replaces all matches.</p></li>
</ul>
<p><a href="https://stringr.tidyverse.org/reference/str_remove.html"><code>str_remove()</code></a>&nbsp;and&nbsp;<a href="https://stringr.tidyverse.org/reference/str_remove.html"><code>str_remove_all()</code></a>&nbsp;are handy shortcuts for&nbsp;<code>str_replace(x, pattern, "")</code></p>
</section>
<section id="sec-questions" class="slide level2">
<h2>Replace values</h2>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb24"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"apple"</span>, <span class="st">"pear"</span>, <span class="st">"banana"</span>)</span>
<span id="cb24-2"><a></a><span class="fu">str_replace_all</span>(x, <span class="st">"[aeiou]"</span>, <span class="st">"-"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "-ppl-"  "p--r"   "b-n-n-"</code></pre>
</div>
</div>
</section>
<section id="sec-extract-variables" class="slide level2">
<h2>Extract variables</h2>
<p>Consider the following dataset</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb26"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a></a>df <span class="ot">&lt;-</span> <span class="fu">tribble</span>(</span>
<span id="cb26-2"><a></a>  <span class="sc">~</span>str,</span>
<span id="cb26-3"><a></a>  <span class="st">"&lt;Sheryl&gt;-F_34"</span>,</span>
<span id="cb26-4"><a></a>  <span class="st">"&lt;Kisha&gt;-F_45"</span>, </span>
<span id="cb26-5"><a></a>  <span class="st">"&lt;Brandon&gt;-N_33"</span>,</span>
<span id="cb26-6"><a></a>  <span class="st">"&lt;Sharon&gt;-F_38"</span>, </span>
<span id="cb26-7"><a></a>  <span class="st">"&lt;Penny&gt;-F_58"</span>,</span>
<span id="cb26-8"><a></a>  <span class="st">"&lt;Justin&gt;-M_41"</span>, </span>
<span id="cb26-9"><a></a>  <span class="st">"&lt;Patricia&gt;-F_84"</span>, </span>
<span id="cb26-10"><a></a>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="sec-extract-variables-2" class="slide level2">
<h2>Extract variables</h2>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb27"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a></a>df <span class="sc">|&gt;</span> </span>
<span id="cb27-2"><a></a>  <span class="fu">separate_wider_regex</span>(</span>
<span id="cb27-3"><a></a>    str,</span>
<span id="cb27-4"><a></a>    <span class="at">patterns =</span> <span class="fu">c</span>(</span>
<span id="cb27-5"><a></a>      <span class="st">"&lt;"</span>, </span>
<span id="cb27-6"><a></a>      <span class="at">name =</span> <span class="st">"[A-Za-z]+"</span>, </span>
<span id="cb27-7"><a></a>      <span class="st">"&gt;-"</span>, </span>
<span id="cb27-8"><a></a>      <span class="at">gender =</span> <span class="st">"."</span>,</span>
<span id="cb27-9"><a></a>      <span class="st">"_"</span>,</span>
<span id="cb27-10"><a></a>      <span class="at">age =</span> <span class="st">"[0-9]+"</span></span>
<span id="cb27-11"><a></a>    )</span>
<span id="cb27-12"><a></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 7 × 3
  name     gender age  
  &lt;chr&gt;    &lt;chr&gt;  &lt;chr&gt;
1 Sheryl   F      34   
2 Kisha    F      45   
3 Brandon  N      33   
4 Sharon   F      38   
5 Penny    F      58   
6 Justin   M      41   
7 Patricia F      84   </code></pre>
</div>
</div>
</section></section>
<section>
<section id="sec-pattern-details" class="title-slide slide level1 center">
<h1>Pattern details</h1>

</section>
<section id="sec-escaping" class="slide level2">
<h2>Escaping</h2>
<p>In order to match a literal <code>.</code>, you need an <strong>escape</strong> which tells the regular expression to match metacharacters&nbsp;literally.</p>
<p>Like strings, regexps use the backslash for escaping.</p>
<ul>
<li><p>So, to match a&nbsp;<code>.</code>, you need the regexp&nbsp;<code>\.</code>.</p></li>
<li><p>Unfortunately this creates a problem. We use strings to represent regular expressions, and&nbsp;<code>\</code>&nbsp;is also used as an escape symbol in strings.</p></li>
</ul>
</section>
<section id="sec-escaping-2" class="slide level2">
<h2>Escaping</h2>
<p>So to create the regular expression&nbsp;<code>\.</code>&nbsp;we need the string&nbsp;<code>"\\."</code>, as the following example shows.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb29"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a></a><span class="co"># To create the regular expression \., we need to use \\.</span></span>
<span id="cb29-2"><a></a>dot <span class="ot">&lt;-</span> <span class="st">"</span><span class="sc">\\</span><span class="st">."</span></span>
<span id="cb29-3"><a></a></span>
<span id="cb29-4"><a></a><span class="co"># But the expression itself only contains one \</span></span>
<span id="cb29-5"><a></a><span class="fu">str_view</span>(dot)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] │ \.</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb31"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a></a><span class="fu">cat</span>(<span class="st">"</span><span class="sc">\n</span><span class="st">"</span>) </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb32"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a></a><span class="co"># And this tells R to look for an explicit .</span></span>
<span id="cb32-2"><a></a><span class="fu">str_view</span>(<span class="fu">c</span>(<span class="st">"abc"</span>, <span class="st">"a.c"</span>, <span class="st">"bef"</span>), <span class="st">"a</span><span class="sc">\\</span><span class="st">.c"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[2] │ &lt;a.c&gt;</code></pre>
</div>
</div>
</section>
<section id="sec-escaping-and-literal" class="slide level2">
<h2>Escaping and literal</h2>
<p>If&nbsp;<code>\</code>&nbsp;is used as an escape character in regular expressions, how do you match a literal&nbsp;<code>\</code>?</p>
<ul>
<li>Well, you need to escape it, creating the regular expression&nbsp;<code>\\</code>. To create that regular expression, you need to use a string, which also needs to escape&nbsp;<code>\</code>. That means to match a literal&nbsp;<code>\</code>&nbsp;you need to write&nbsp;<code>"\\\\"</code>&nbsp;— you need four backslashes to match one!</li>
</ul>
</section>
<section id="sec-escaping-and-literal-2" class="slide level2">
<h2>Escaping and literal</h2>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb34"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a></a>x <span class="ot">&lt;-</span> <span class="st">"a</span><span class="sc">\\</span><span class="st">b"</span></span>
<span id="cb34-2"><a></a><span class="fu">str_view</span>(x)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] │ a\b</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb36"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a></a><span class="fu">cat</span>(<span class="st">"</span><span class="sc">\n</span><span class="st">"</span>) </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb37"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a></a><span class="fu">str_view</span>(x, <span class="st">"</span><span class="sc">\\\\</span><span class="st">"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] │ a&lt;\&gt;b</code></pre>
</div>
</div>
</section>
<section id="sec-matching-literals" class="slide level2">
<h2>Matching literals</h2>
<p>If you’re trying to match a literal&nbsp;<code>.</code>,&nbsp;<code>$</code>,&nbsp;<code>|</code>,&nbsp;<code>*</code>,&nbsp;<code>+</code>,&nbsp;<code>?</code>,&nbsp;<code>{</code>,&nbsp;<code>}</code>,&nbsp;<code>(</code>,&nbsp;<code>)</code>, there’s an alternative to using a backslash escape: you can use a character class:&nbsp;<code>[.]</code>,&nbsp;<code>[$]</code>,&nbsp;<code>[|]</code>, … all match the literal values.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb39"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a></a><span class="fu">str_view</span>(<span class="fu">c</span>(<span class="st">"abc"</span>, <span class="st">"a.c"</span>, <span class="st">"a*c"</span>, <span class="st">"a c"</span>), <span class="st">"a[.]c"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[2] │ &lt;a.c&gt;</code></pre>
</div>
</div>
</section>
<section id="sec-anchors" class="slide level2">
<h2>Anchors</h2>
<p>By default, regular expressions will match any part of a string. If you want to match at the start or end you need to&nbsp;<strong>anchor</strong>&nbsp;the regular expression using&nbsp;<code>^</code>&nbsp;to match the start or&nbsp;<code>$</code>&nbsp;to match the end:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb41"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a></a><span class="fu">str_view</span>(fruit, <span class="st">"^a"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] │ &lt;a&gt;pple
[2] │ &lt;a&gt;pricot
[3] │ &lt;a&gt;vocado</code></pre>
</div>
</div>
</section>
<section id="sec-anchors-2" class="slide level2">
<h2>Anchors</h2>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb43"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a></a><span class="fu">str_view</span>(fruit, <span class="st">"a$"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code> [4] │ banan&lt;a&gt;
[15] │ cherimoy&lt;a&gt;
[30] │ feijo&lt;a&gt;
[36] │ guav&lt;a&gt;
[56] │ papay&lt;a&gt;
[74] │ satsum&lt;a&gt;</code></pre>
</div>
</div>
</section>
<section id="sec-anchors-3" class="slide level2">
<h2>Anchors</h2>
<p>To force a regular expression to match only the full string, anchor it with both&nbsp;<code>^</code>&nbsp;and&nbsp;<code>$</code>:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb45"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a></a><span class="fu">str_view</span>(fruit, <span class="st">"apple"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] │ &lt;apple&gt;
[62] │ pine&lt;apple&gt;</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb47"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a></a><span class="fu">cat</span>(<span class="st">"</span><span class="sc">\n</span><span class="st">"</span>) </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb48"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a></a><span class="fu">str_view</span>(fruit, <span class="st">"^apple$"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] │ &lt;apple&gt;</code></pre>
</div>
</div>
</section>
<section id="sec-anchors-4" class="slide level2">
<h2>Anchors</h2>
<p>You can also match the boundary between words (i.e.&nbsp;the start or end of a word) with&nbsp;<code>\b</code>.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb50"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"summary(x)"</span>, <span class="st">"summarize(df)"</span>, <span class="st">"rowsum(x)"</span>, <span class="st">"sum(x)"</span>)</span>
<span id="cb50-2"><a></a><span class="fu">str_view</span>(x, <span class="st">"sum"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] │ &lt;sum&gt;mary(x)
[2] │ &lt;sum&gt;marize(df)
[3] │ row&lt;sum&gt;(x)
[4] │ &lt;sum&gt;(x)</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb52"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a></a><span class="fu">cat</span>(<span class="st">"</span><span class="sc">\n</span><span class="st">"</span>) </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb53"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a></a><span class="fu">str_view</span>(x, <span class="st">"</span><span class="sc">\\</span><span class="st">bsum</span><span class="sc">\\</span><span class="st">b"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[4] │ &lt;sum&gt;(x)</code></pre>
</div>
</div>
</section>
<section id="sec-anchors-5" class="slide level2">
<h2>Anchors</h2>
<p>When used alone, anchors will produce a zero-width match</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb55"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a></a><span class="fu">str_view</span>(<span class="st">"abc"</span>, <span class="fu">c</span>(<span class="st">"$"</span>, <span class="st">"^"</span>, <span class="st">"</span><span class="sc">\\</span><span class="st">b"</span>))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] │ abc&lt;&gt;
[2] │ &lt;&gt;abc
[3] │ &lt;&gt;abc&lt;&gt;</code></pre>
</div>
</div>
</section>
<section id="sec-anchors-6" class="slide level2">
<h2>Anchors</h2>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb57"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a></a><span class="fu">str_replace_all</span>(<span class="st">"abc"</span>, <span class="fu">c</span>(<span class="st">"$"</span>, <span class="st">"^"</span>, <span class="st">"</span><span class="sc">\\</span><span class="st">b"</span>), <span class="st">"--"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "abc--"   "--abc"   "--abc--"</code></pre>
</div>
</div>
</section>
<section id="sec-character-classes-1" class="slide level2">
<h2>Character classes</h2>
<p>A <strong>character class</strong>, or character <strong>set</strong>, allows you to match any character in a set. As we discussed above, you can construct your own sets with <code>[]</code>, where <code>[abc]</code> matches “a”, “b”, or “c” and <code>[^abc]</code> matches any character except “a”, “b”, or “c”. Apart from <code>^</code> there are two other characters that have special meaning inside of <code>[]:</code></p>
<ul>
<li><code>-</code> defines a range, e.g., <code>[a-z]</code> matches any lower case letter and <code>[0-9]</code> matches any number.</li>
<li><code>\</code> escapes special characters, so <code>[\^\-\]]</code> matches <code>^</code>, <code>-</code>, or <code>]</code>.</li>
</ul>
</section>
<section id="sec-character-classes-example-1" class="slide level2">
<h2>Character classes example 1</h2>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb59"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a></a>x <span class="ot">&lt;-</span> <span class="st">"abcd ABCD 12345 -!@#%."</span></span>
<span id="cb59-2"><a></a><span class="fu">str_view</span>(x, <span class="st">"[abc]+"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] │ &lt;abc&gt;d ABCD 12345 -!@#%.</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb61"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a></a><span class="fu">cat</span>(<span class="st">"</span><span class="sc">\n</span><span class="st">"</span>) </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb62"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a></a><span class="fu">str_view</span>(x, <span class="st">"[a-z]+"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] │ &lt;abcd&gt; ABCD 12345 -!@#%.</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb64"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a></a><span class="fu">cat</span>(<span class="st">"</span><span class="sc">\n</span><span class="st">"</span>) </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb65"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a></a><span class="fu">str_view</span>(x, <span class="st">"[^a-z0-9]+"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] │ abcd&lt; ABCD &gt;12345&lt; -!@#%.&gt;</code></pre>
</div>
</div>
</section>
<section id="sec-character-classes-example-2" class="slide level2">
<h2>Character classes example 2</h2>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb67"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a></a><span class="co"># You need an escape to match characters that are otherwise</span></span>
<span id="cb67-2"><a></a><span class="co"># special inside of []</span></span>
<span id="cb67-3"><a></a><span class="fu">str_view</span>(<span class="st">"a-b-c"</span>, <span class="st">"[a-c]"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] │ &lt;a&gt;-&lt;b&gt;-&lt;c&gt;</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb69"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a></a><span class="fu">cat</span>(<span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb70"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a></a><span class="fu">str_view</span>(<span class="st">"a-b-c"</span>, <span class="st">"[a</span><span class="sc">\\</span><span class="st">-c]"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] │ &lt;a&gt;&lt;-&gt;b&lt;-&gt;&lt;c&gt;</code></pre>
</div>
</div>
</section>
<section id="sec-character-classes-3" class="slide level2">
<h2>Character classes</h2>
<p>Some character classes are used so commonly that they get their own shortcut. You’ve already seen <code>.</code>, which matches any character apart from a newline. There are three other particularly useful pairs:</p>
<ul>
<li><code>\d</code> matches any digit;<br>
<code>\D</code> matches anything that isn’t a digit.</li>
<li><code>\s</code> matches any whitespace (e.g., space, tab, newline);<br>
<code>\S</code> matches anything that isn’t whitespace.</li>
<li><code>\w</code> matches any “word” character, i.e.&nbsp;letters and numbers;<br>
<code>\W</code> matches any “non-word” character.</li>
</ul>
</section>
<section id="sec-character-classes-5" class="slide level2">
<h2>Character classes</h2>
<p>The following code demonstrates the six shortcuts with a selection of letters, numbers, and punctuation characters.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb72"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a></a>x <span class="ot">&lt;-</span> <span class="st">"abcd ABCD 12345 -!@#%."</span></span>
<span id="cb72-2"><a></a><span class="fu">str_view</span>(x, <span class="st">"</span><span class="sc">\\</span><span class="st">d+"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] │ abcd ABCD &lt;12345&gt; -!@#%.</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb74"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a></a><span class="fu">str_view</span>(x, <span class="st">"</span><span class="sc">\\</span><span class="st">D+"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] │ &lt;abcd ABCD &gt;12345&lt; -!@#%.&gt;</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb76"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a></a><span class="fu">str_view</span>(x, <span class="st">"</span><span class="sc">\\</span><span class="st">s+"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] │ abcd&lt; &gt;ABCD&lt; &gt;12345&lt; &gt;-!@#%.</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb78"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb78-1"><a></a><span class="fu">str_view</span>(x, <span class="st">"</span><span class="sc">\\</span><span class="st">S+"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] │ &lt;abcd&gt; &lt;ABCD&gt; &lt;12345&gt; &lt;-!@#%.&gt;</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb80"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb80-1"><a></a><span class="fu">str_view</span>(x, <span class="st">"</span><span class="sc">\\</span><span class="st">w+"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] │ &lt;abcd&gt; &lt;ABCD&gt; &lt;12345&gt; -!@#%.</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb82"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb82-1"><a></a><span class="fu">str_view</span>(x, <span class="st">"</span><span class="sc">\\</span><span class="st">W+"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] │ abcd&lt; &gt;ABCD&lt; &gt;12345&lt; -!@#%.&gt;</code></pre>
</div>
</div>
</section>
<section id="sec-quantifiers-3" class="slide level2">
<h2>Quantifiers</h2>
<p><strong>Quantifiers</strong> control how many times a pattern matches. Previously, we learned about <code>?</code> (0 or 1 matches), <code>+</code> (1 or more matches), and <code>*</code> (0 or more matches). For example, <code>colou?r</code> will match American or British spelling, <code>\d+</code> will match one or more digits, and <code>\s?</code> will optionally match a single item of whitespace. You can also specify the number of matches precisely with <code>{}</code>:</p>
<ul>
<li><code>{n}</code> matches exactly n times.</li>
<li><code>{n,}</code> matches at least n times.</li>
<li><code>{n,m}</code> matches between n and m times.</li>
</ul>
</section>
<section id="sec-operator-precedence-and-parentheses" class="slide level2">
<h2>Operator precedence and parentheses</h2>
<ul>
<li><p>Regular expressions have their own precedence rules</p></li>
<li><p>Quantifiers have high precedence</p></li>
<li><p>Alternation has low precedence</p>
<p>which means that <code>ab+</code> is equivalent to <code>a(b+)</code>, and <code>^a|b$</code> is equivalent to <code>(^a)|(b$)</code>.</p></li>
</ul>
<p>Just like with algebra, you can use parentheses to override the usual order. But unlike algebra you’re unlikely to remember the precedence rules for regexes, so feel free to use parentheses liberally.</p>
</section>
<section id="sec-grouping-and-capturing" class="slide level2">
<h2>Grouping and capturing</h2>
<p>As well as overriding operator precedence, parentheses have another important effect: they create <strong>capturing groups</strong> that allow you to use sub-components of the match.</p>
<p>For example, the following pattern finds all fruits that have a repeated pair of letters:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb84"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb84-1"><a></a><span class="fu">str_view</span>(fruit, <span class="st">"(..)</span><span class="sc">\\</span><span class="st">1"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code> [4] │ b&lt;anan&gt;a
[20] │ &lt;coco&gt;nut
[22] │ &lt;cucu&gt;mber
[41] │ &lt;juju&gt;be
[56] │ &lt;papa&gt;ya
[73] │ s&lt;alal&gt; berry</code></pre>
</div>
</div>
</section>
<section id="sec-grouping-and-capturing-2" class="slide level2">
<h2>Grouping and capturing</h2>
<p>And this one finds all words that start and end with the same pair of letters:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb86"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb86-1"><a></a><span class="fu">str_view</span>(words, <span class="st">"^(..).*</span><span class="sc">\\</span><span class="st">1$"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[152] │ &lt;church&gt;
[217] │ &lt;decide&gt;
[617] │ &lt;photograph&gt;
[699] │ &lt;require&gt;
[739] │ &lt;sense&gt;</code></pre>
</div>
</div>
</section>
<section id="sec-grouping-and-capturing-3" class="slide level2">
<h2>Grouping and capturing</h2>
<p>You can also use back references in <code>str_replace()</code>. For example, this code switches the order of the second and third words in <code>sentences</code>:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb88"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a></a>sentences <span class="sc">|&gt;</span> </span>
<span id="cb88-2"><a></a>  <span class="fu">str_replace</span>(<span class="st">"(</span><span class="sc">\\</span><span class="st">w+) (</span><span class="sc">\\</span><span class="st">w+) (</span><span class="sc">\\</span><span class="st">w+)"</span>, <span class="st">"</span><span class="sc">\\</span><span class="st">1 </span><span class="sc">\\</span><span class="st">3 </span><span class="sc">\\</span><span class="st">2"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb88-3"><a></a>  <span class="fu">str_view</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] │ The canoe birch slid on the smooth planks.
 [2] │ Glue sheet the to the dark blue background.
 [3] │ It's to easy tell the depth of a well.
 [4] │ These a days chicken leg is a rare dish.
 [5] │ Rice often is served in round bowls.
 [6] │ The of juice lemons makes fine punch.
 [7] │ The was box thrown beside the parked truck.
 [8] │ The were hogs fed chopped corn and garbage.
 [9] │ Four of hours steady work faced us.
[10] │ A size large in stockings is hard to sell.
[11] │ The was boy there when the sun rose.
[12] │ A is rod used to catch pink salmon.
[13] │ The of source the huge river is the clear spring.
[14] │ Kick ball the straight and follow through.
[15] │ Help woman the get back to her feet.
[16] │ A of pot tea helps to pass the evening.
[17] │ Smoky lack fires flame and heat.
[18] │ The cushion soft broke the man's fall.
[19] │ The breeze salt came across from the sea.
[20] │ The at girl the booth sold fifty bonds.
... and 700 more</code></pre>
</div>
</div>


</section></section>
    </div>
  <div class="quarto-auto-generated-content" style="display: none;">
<div class="footer footer-default">
<p><a href="https://bovi-analytics.github.io/BeastsAndBytes/">https://bovi-analytics.github.io/BeastsAndBytes/</a></p>
</div>
</div></div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="../site_libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="../site_libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="../site_libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="../site_libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="../site_libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="../site_libs/revealjs/plugin/notes/notes.js"></script>
  <script src="../site_libs/revealjs/plugin/search/search.js"></script>
  <script src="../site_libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="../site_libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'jumpToSlide': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleScrollView(event)\"><kbd>r</kbd> Scroll View Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: false,

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdn.jsdelivr.net/npm/mathjax@2.7.9/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    
    <script>
      // htmlwidgets need to know to resize themselves when slides are shown/hidden.
      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current
      // slide changes (different for each slide format).
      (function () {
        // dispatch for htmlwidgets
        function fireSlideEnter() {
          const event = window.document.createEvent("Event");
          event.initEvent("slideenter", true, true);
          window.document.dispatchEvent(event);
        }

        function fireSlideChanged(previousSlide, currentSlide) {
          fireSlideEnter();

          // dispatch for shiny
          if (window.jQuery) {
            if (previousSlide) {
              window.jQuery(previousSlide).trigger("hidden");
            }
            if (currentSlide) {
              window.jQuery(currentSlide).trigger("shown");
            }
          }
        }

        // hookup for slidy
        if (window.w3c_slidy) {
          window.w3c_slidy.add_observer(function (slide_num) {
            // slide_num starts at position 1
            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);
          });
        }

      })();
    </script>

    <script id="quarto-html-after-body" type="application/javascript">
      window.document.addEventListener("DOMContentLoaded", function (event) {
        const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
        tabsets.forEach(function(tabset) {
          const tabby = new Tabby('#' + tabset.id);
        });
        const isCodeAnnotation = (el) => {
          for (const clz of el.classList) {
            if (clz.startsWith('code-annotation-')) {                     
              return true;
            }
          }
          return false;
        }
        const onCopySuccess = function(e) {
          // button target
          const button = e.trigger;
          // don't keep focus
          button.blur();
          // flash "checked"
          button.classList.add('code-copy-button-checked');
          var currentTitle = button.getAttribute("title");
          button.setAttribute("title", "Copied!");
          let tooltip;
          if (window.bootstrap) {
            button.setAttribute("data-bs-toggle", "tooltip");
            button.setAttribute("data-bs-placement", "left");
            button.setAttribute("data-bs-title", "Copied!");
            tooltip = new bootstrap.Tooltip(button, 
              { trigger: "manual", 
                customClass: "code-copy-button-tooltip",
                offset: [0, -8]});
            tooltip.show();    
          }
          setTimeout(function() {
            if (tooltip) {
              tooltip.hide();
              button.removeAttribute("data-bs-title");
              button.removeAttribute("data-bs-toggle");
              button.removeAttribute("data-bs-placement");
            }
            button.setAttribute("title", currentTitle);
            button.classList.remove('code-copy-button-checked');
          }, 1000);
          // clear code selection
          e.clearSelection();
        }
        const getTextToCopy = function(trigger) {
          const outerScaffold = trigger.parentElement.cloneNode(true);
          const codeEl = outerScaffold.querySelector('code');
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
        }
        const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
          text: getTextToCopy
        });
        clipboard.on('success', onCopySuccess);
        if (window.document.getElementById('quarto-embedded-source-code-modal')) {
          const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
            text: getTextToCopy,
            container: window.document.getElementById('quarto-embedded-source-code-modal')
          });
          clipboardModal.on('success', onCopySuccess);
        }
          var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
          var mailtoRegex = new RegExp(/^mailto:/);
            var filterRegex = new RegExp("https:\/\/bovi-analytics\.github\.io\/BeastAndBytes\/");
          var isInternal = (href) => {
              return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
          }
          // Inspect non-navigation links and adorn them if external
         var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
          for (var i=0; i<links.length; i++) {
            const link = links[i];
            if (!isInternal(link.href)) {
              // undo the damage that might have been done by quarto-nav.js in the case of
              // links that we want to consider external
              if (link.dataset.originalHref !== undefined) {
                link.href = link.dataset.originalHref;
              }
            }
          }
        function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
          const config = {
            allowHTML: true,
            maxWidth: 500,
            delay: 100,
            arrow: false,
            appendTo: function(el) {
                return el.closest('section.slide') || el.parentElement;
            },
            interactive: true,
            interactiveBorder: 10,
            theme: 'light-border',
            placement: 'bottom-start',
          };
          if (contentFn) {
            config.content = contentFn;
          }
          if (onTriggerFn) {
            config.onTrigger = onTriggerFn;
          }
          if (onUntriggerFn) {
            config.onUntrigger = onUntriggerFn;
          }
            config['offset'] = [0,0];
            config['maxWidth'] = 700;
          window.tippy(el, config); 
        }
        const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
        for (var i=0; i<noterefs.length; i++) {
          const ref = noterefs[i];
          tippyHover(ref, function() {
            // use id or data attribute instead here
            let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
            try { href = new URL(href).hash; } catch {}
            const id = href.replace(/^#\/?/, "");
            const note = window.document.getElementById(id);
            if (note) {
              return note.innerHTML;
            } else {
              return "";
            }
          });
        }
        const findCites = (el) => {
          const parentEl = el.parentElement;
          if (parentEl) {
            const cites = parentEl.dataset.cites;
            if (cites) {
              return {
                el,
                cites: cites.split(' ')
              };
            } else {
              return findCites(el.parentElement)
            }
          } else {
            return undefined;
          }
        };
        var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
        for (var i=0; i<bibliorefs.length; i++) {
          const ref = bibliorefs[i];
          const citeInfo = findCites(ref);
          if (citeInfo) {
            tippyHover(citeInfo.el, function() {
              var popup = window.document.createElement('div');
              citeInfo.cites.forEach(function(cite) {
                var citeDiv = window.document.createElement('div');
                citeDiv.classList.add('hanging-indent');
                citeDiv.classList.add('csl-entry');
                var biblioDiv = window.document.getElementById('ref-' + cite);
                if (biblioDiv) {
                  citeDiv.innerHTML = biblioDiv.innerHTML;
                }
                popup.appendChild(citeDiv);
              });
              return popup.innerHTML;
            });
          }
        }
      });
      </script>
    

</body></html>